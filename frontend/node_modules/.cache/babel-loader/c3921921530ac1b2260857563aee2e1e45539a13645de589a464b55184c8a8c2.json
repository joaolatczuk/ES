{"ast":null,"code":"// routes/favoritosRoutes.js\nconst express = require('express');\nconst router = express.Router();\nconst db = require('../db'); // ou ../dbFunctions\n\n// GET /api/favoritos/:idUsuario\nrouter.get('/:idUsuario', async (req, res) => {\n  const {\n    idUsuario\n  } = req.params;\n  try {\n    const [favoritos] = await db.query(`\n      SELECT c.*, GROUP_CONCAT(i.url) AS imagens, u.nome AS autor\n      FROM favoritos f\n      INNER JOIN conteudos c ON f.id_conteudo = c.id\n      LEFT JOIN imagens_conteudo i ON c.id = i.id_conteudo\n      LEFT JOIN usuarios u ON c.id_autor = u.id\n      WHERE f.id_usuario = ? AND f.statusAtivo = 1 AND c.status = 'aprovado'\n      GROUP BY c.id\n    `, [idUsuario]);\n    res.json(favoritos);\n  } catch (err) {\n    console.error('Erro ao buscar favoritos:', err);\n    res.status(500).json({\n      error: 'Erro ao buscar favoritos'\n    });\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","router","Router","db","get","req","res","idUsuario","params","favoritos","query","json","err","console","error","status","module","exports"],"sources":["C:/Users/JoÃ£o/Desktop/ES/frontend/src/components/Favoritas.jsx"],"sourcesContent":["// routes/favoritosRoutes.js\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst db = require('../db'); // ou ../dbFunctions\r\n\r\n// GET /api/favoritos/:idUsuario\r\nrouter.get('/:idUsuario', async (req, res) => {\r\n  const { idUsuario } = req.params;\r\n\r\n  try {\r\n    const [favoritos] = await db.query(`\r\n      SELECT c.*, GROUP_CONCAT(i.url) AS imagens, u.nome AS autor\r\n      FROM favoritos f\r\n      INNER JOIN conteudos c ON f.id_conteudo = c.id\r\n      LEFT JOIN imagens_conteudo i ON c.id = i.id_conteudo\r\n      LEFT JOIN usuarios u ON c.id_autor = u.id\r\n      WHERE f.id_usuario = ? AND f.statusAtivo = 1 AND c.status = 'aprovado'\r\n      GROUP BY c.id\r\n    `, [idUsuario]);\r\n\r\n    res.json(favoritos);\r\n  } catch (err) {\r\n    console.error('Erro ao buscar favoritos:', err);\r\n    res.status(500).json({ error: 'Erro ao buscar favoritos' });\r\n  }\r\n});\r\n\r\nmodule.exports = router;"],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,EAAE,GAAGH,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;;AAE7B;AACAC,MAAM,CAACG,GAAG,CAAC,aAAa,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC5C,MAAM;IAAEC;EAAU,CAAC,GAAGF,GAAG,CAACG,MAAM;EAEhC,IAAI;IACF,MAAM,CAACC,SAAS,CAAC,GAAG,MAAMN,EAAE,CAACO,KAAK,CAAC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,EAAE,CAACH,SAAS,CAAC,CAAC;IAEfD,GAAG,CAACK,IAAI,CAACF,SAAS,CAAC;EACrB,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;IAC/CN,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACJ,IAAI,CAAC;MAAEG,KAAK,EAAE;IAA2B,CAAC,CAAC;EAC7D;AACF,CAAC,CAAC;AAEFE,MAAM,CAACC,OAAO,GAAGhB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}